name: GitHub Release of nRF Connect for Desktop

on:
  workflow_call:
    inputs:
      prerelease:
        description: 'Make the release a pre-release'
        required: true
        default: true
        type: boolean
      draft:
        description: 'Create draft release'
        required: true
        default: true
        type: boolean

jobs:
  release:
    runs-on: ['ubuntu-latest']
    steps:
      - name: Download Artifacts from build
        uses: actions/download-artifact@v4
        with:
          name: nRF Connect for Desktop
      - name: List directory
        run: ls -lR
      - name: File workspace/Changelog.md
        run: file ${{ github.workspace }}/Changelog.md
      - name: File ./Changelog.md
        run: file ./Changelog.md
      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
            body_path: ${{ github.workspace }}/Changelog.md
            generate_release_notes: true
            allowUpdates: false
            files: |
              nrfconnect*
            prerelease: ${{ inputs.prerelease }}
            draft: ${{ inputs.draft }}


